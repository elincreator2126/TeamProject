<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.test.HHDAO">
<select id="getOneUser" parameterType="String" resultType="userVO">
select * from users where id= #{id}
</select>

<select id="getUserID" parameterType="String" resultType="userVO">
select * from users where id LIKE #{id}||'%' order by id 
</select>

<select id="getUserName" parameterType="String" resultType="userVO">
select * from users where name LIKE #{name}||'%' order by name
</select>

<select id="getHashtag" parameterType="String" resultType="postVO">
select * from posts where hashtag LIKE '%'||#{hashtag}||'%'
</select>

<insert id="insertPostData" parameterType="postVO">
<selectKey resultType="int" keyProperty="postNum" order="BEFORE">
	select posts_seq.nextval from dual
</selectKey>
insert into posts values(#{postNum}, #{id}, #{contents},
 #{imagepath}, #{hashtag}, sysdate)
</insert>

<select id="getPostNum" parameterType="int" resultType="postVO">
select * from posts where postNum=#{postNum}
</select>

<insert id="insertUserData" parameterType="userVO">
<selectKey resultType="int" keyProperty="userNum" order="BEFORE">
	select users_seq.nextval from dual
</selectKey>
insert into users values(#{userNum}, #{id}, #{password},
 #{email}, #{name}, #{telephone}, null)
</insert>
<select id="getThumbsup" parameterType="int" resultType="thumbsupVO">
select * from thumbsup where postNum=#{postNum}
</select>

<insert id="thumbsPlus" parameterType="thumbsupVO">
insert into thumbsup values(thumbsup_SEQ.nextval, #{id}, #{postNum})
</insert>

<delete id="thumbsMinus" parameterType="thumbsupVO">
delete from thumbsup where id=#{id} and postNum=#{postNum}
</delete>

<insert id="addComments" parameterType="commentsVO">
<selectKey keyProperty="commentNum" resultType="integer" order="BEFORE">
select comments_SEQ.NEXTVAL from dual
</selectKey>
insert into comments values(#{commentNum}, #{id}, #{postNum}, #{comments}, sysdate)
</insert>

<select id="getComments" parameterType="int" resultType="commentsVO">
select * from comments where postNum=#{posttNum} order by commentsDate DESC
</select>

<select id="getProfileImage" parameterType="UserVO" resultType="String">
select profileImage from users where id=#{id}
</select>

<select id="getProfilePosts" parameterType="int" resultType="integer">
select postDate from posts where id=#{id} order by postDate DESC
</select>

</mapper>




