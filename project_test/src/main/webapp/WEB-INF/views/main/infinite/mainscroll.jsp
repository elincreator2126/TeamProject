<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
 <meta name="author"/>
 <meta name="viewport" content="width=device-width">
 <title>Infinite Scroll</title>
 <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
<script src="/jquery-3.2.1.min.js"></script>
<script>
var user = sessionStorage.getItem("user") //프로필 연결용 세션 유지 (하은)
$(document).ready(function(){
	
})//document ready end

function search(){
	location.href = "/search"
}

function profile(){
	location.href = "/profile?id=" + user //로그인채로 mainscroll - profile 접속 표시 (하은)
}

<link href='styles/messages.css' rel='stylesheet' type='text/css'>
</head>
<body>
<div id="templates">
<div id= mainBarBox>
	<div id="iconPBox">
		<div id="searchIconBox">
		</div>
		<div id="loginIconBox" >
		</div>
		<div id="langueIconBox">
			<div id="subIconPBox">
				<div id="subIconPBox1">
					<svg class="subIconBox" viewBox="0 0 342 79">
						<path id="subIconBox" d="M 20 0 L 322 0 C 333.045684 0 342 8.9543047 342 20 L 342 59 C 342 70.0456924 333.045684 79 322 79 L 20 79 C 8.95430469 79 0 70.0456924 0 59 L 0 20 C 0 8.9543047 8.9543047 0 20 0 Z" />
					</svg>
					<svg class="writeIcon" viewBox="3 2.997 34 34">
						<path id="writeIcon" d="M 3 29.9151535 L 3 36.9975013 L 10.0823497 36.9975013 L 30.97056 16.109291 L 23.8882102 9.02693939 L 3 29.9151535 Z M 36.4475784 10.6322727 C 37.184143 9.89570903 37.184143 8.70587348 36.4475784 7.9693098 L 32.0281906 3.54992318 C 31.2916278 2.81335854 30.1017894 2.81335854 29.3652286 3.54992318 L 25.9090404 7.00611019 L 32.9913864 14.0884618 L 36.4475784 10.6322746 Z" />
					</svg>
					<svg class="sendMessageIcon" viewBox="0 2.666 34 28">
						<path id="sendMessageIcon" d="M 15.2734375 19.8500843 L 14.1673746 30.666 L 20.9248752 22.4162521 L 27.3901863 25.3005657 L 34 2.66704964 L 15.2734375 19.8500843 Z M 34 2.66704988 L 0 16.4775276 L 8.02718734 18.0661582 L 14.1673746 30.6660003 L 9.73993682 18.0661582 L 34 2.66600036 Z" />
					</svg>
					<svg class="messageBoxIcon" viewBox="0 0 34 32">
						<path id="messageBoxIcon" d="M 14.1666667 4 C 12.6716108 4 11.2275552 4.2487 9.87605476 4.738 C 8.60955524 5.1977 7.48188877 5.84499979 6.52611064 6.6648 C 4.754333 8.182 3.77777743 10.1269998 3.77777743 12.138 C 3.77777743 13.263 4.07527732 14.355 4.66083335 15.385 C 5.27094411 16.458 6.19272232 17.441 7.32511091 18.2270011 C 8.22327709 18.851 8.82866573 19.85 8.98827743 20.975 C 9.01472187 21.162 9.03644371 21.35 9.05249977 21.539 C 9.13277721 21.46 9.21211051 21.379 9.29238796 21.295 C 10.0044994 20.544 10.965 20.129 11.9585552 20.129 C 12.1162767 20.129 12.2749443 20.14 12.4336109 20.161 C 13.005 20.237999 13.588667 20.2769985 14.1676101 20.2769985 C 15.6626663 20.2769985 17.1067199 20.0289993 18.4582214 19.5389976 C 19.72472 19.079998 20.8523864 18.4319972 21.8081665 17.612997 C 23.5799427 16.0949974 24.5564994 14.1499967 24.5564994 12.138997 C 24.5564994 10.1279973 23.5808868 8.18299674 21.8081665 6.6649971 C 20.8523883 5.84599685 19.7247219 5.19799709 18.4582214 4.73899698 C 17.1067199 4.24899673 15.6626663 4.00099706 14.1676092 4.00099706 Z M 14.166666 0 L 14.166666 0 C 21.9904441 0 28.333332 5.43499994 28.333332 12.139 C 28.333332 18.843 21.9904441 24.2779998 14.166666 24.2779998 C 13.4148893 24.278 12.6782217 24.2269992 11.957611 24.131 C 8.91461086 27.34 5.4003334 27.916 1.88888883 28 L 1.88888883 27.215 C 3.78533315 26.235 5.3125 24.45 5.3125 22.411 C 5.3125 22.126 5.29172229 21.847 5.25299978 21.574 C 2.04944419 19.349 0 15.9489994 0 12.14 C 0 5.43599939 6.34288883 0.00099945 14.166666 0.00099945 Z M 29.395832 27.209 C 29.3958320 28.9569988 30.4677753 30.487 32.1111106 31.327 L 32.1111106 32 C 29.0671653 31.9279994 26.2735 31.434 23.63661 28.684 C 23.0123329 28.767 22.3738880 28.81 21.7222213 28.8099994 C 18.9049434 28.81 16.3086662 28.0049991 14.2374992 26.6529998 C 18.5073337 26.637 22.5382194 25.189 25.5953884 22.569 C 27.1357765 21.249 28.3522224 19.6990013 29.20789 17.964 C 30.1154994 16.124 30.5763874 14.165 30.5763874 12.139 C 30.5763874 11.813 30.5631656 11.488 30.5395526 11.165 C 32.6815528 13.038001 34 15.5910015 34 18.4050006 C 34 21.6700000 32.2244415 24.5839996 29.4477767 26.4910011 C 29.4137783 26.7250003 29.395832 26.965002 29.395832 27.2090015 Z" />
					</svg>

					<svg class="bookmark" viewBox="6 0 20 32">
						<path id="bookmark" d="M 24 32 L 16 21 L 7.99999952 32 C 6.89599895 32 5.99999952 31.104 5.99999952 30 L 5.99999952 2 C 5.99999952 0.896 6.89599895 0 7.99999952 0 L 24 0 C 25.1040019 0 26 0.896 26 2 L 26 30 C 26 31.104 25.1040019 32 24 32 Z M 23.5 2 L 8.49999904 2 C 8.22399997 2 7.99999952 2.224 7.99999952 2.50000023 C 7.99999952 2.776 8.22399997 3 8.49999904 3 L 23.5 3 C 23.775999 3 24 2.77600002 24 2.50000023 C 24 2.22399997 23.7759990 2 23.5 2 Z" />
					</svg>
					<div id="optionIconPBox">
						<svg class="optionIconBox1" viewBox="80.5 1122.939 34 34.001">
							<path id="optionIconBox1" d="M 114.285308 1137.36096 C 114.204689 1136.82946 113.838462 1136.38659 113.333312 1136.2069 L 110.65509 1135.25488 C 110.495773 1134.80603 110.316062 1134.36999 110.116905 1133.94738 L 111.336051 1131.38171 C 111.566284 1130.89794 111.511894 1130.32678 111.194236 1129.89355 C 110.16645 1128.4967 108.938568 1127.26867 107.545547 1126.24584 C 107.112289 1125.92810 106.542060 1125.87487 106.057312 1126.10485 L 103.493721 1127.32324 C 103.071151 1127.12402 102.634979 1126.94433 102.185203 1126.78601 L 101.232231 1124.10681 C 101.053489 1123.60253 100.611488 1123.23730 100.081085 1123.15563 C 98.1984634 1122.86621 96.8044586 1122.86621 94.9189224 1123.15563 C 94.3894882 1123.2373 93.9465255 1123.60253 93.7677688 1124.10681 L 92.8148117 1126.78601 C 92.3650283 1126.94433 91.9288635 1127.12402 91.5072631 1127.32324 L 88.9417266 1126.10485 C 88.4579467 1125.87487 87.8867492 1125.9281 87.4544601 1126.24584 C 86.0614395 1127.26867 84.8335418 1128.4967 83.8057708 1129.89355 C 83.4881134 1130.32678 83.4337234 1130.89794 83.6639556 1131.38171 L 84.8830871 1133.94738 C 84.6839447 1134.36889 84.5042266 1134.80603 84.3449172 1135.25488 L 81.6666946 1136.20788 C 81.1615524 1136.38745 80.7953186 1136.83056 80.7146987 1137.36096 C 80.5680084 1138.32067 80.5 1139.13964 80.5 1139.93994 C 80.5 1140.73950 80.5680084 1141.55944 80.7146987 1142.51916 C 80.7953186 1143.05053 81.1615524 1143.49353 81.6666946 1143.67321 L 84.3449172 1144.62524 C 84.5042266 1145.07495 84.6839447 1145.51135 84.8830871 1145.93383 L 83.6639556 1148.49829 C 83.4337234 1148.98217 83.4881134 1149.55346 83.8057708 1149.98559 C 84.8315963 1151.38171 86.059494 1152.60949 87.4544601 1153.63427 C 87.8867492 1153.95190 88.4579467 1154.00634 88.9426956 1153.77514 L 91.5062942 1152.55700 C 91.9288635 1152.75622 92.3650283 1152.93579 92.8148117 1153.09411 L 93.7677688 1155.77343 C 93.9465255 1156.27758 94.3885116 1156.64282 94.9189224 1156.72436 C 95.8612060 1156.87011 96.7053756 1156.93994 97.5 1156.93994 C 98.2946319 1156.93994 99.1388015 1156.87011 100.081085 1156.72436 C 100.611488 1156.64282 101.053489 1156.27758 101.232231 1155.77343 L 102.185203 1153.09411 C 102.634979 1152.93579 103.071151 1152.75622 103.493721 1152.55700 L 106.057312 1153.77514 C 106.542060 1154.00634 107.113265 1153.9519 107.545547 1153.63427 C 108.942451 1152.60754 110.170341 1151.37963 111.194236 1149.98559 C 111.511894 1149.55346 111.566284 1148.98217 111.336051 1148.49829 L 110.116905 1145.93383 C 110.316062 1145.51135 110.495773 1145.07397 110.655090 1144.62524 L 113.333312 1143.67321 C 113.838462 1143.49353 114.204689 1143.05053 114.285308 1142.51916 C 114.431999 1141.55944 114.500007 1140.73950 114.500007 1139.93994 C 114.500007 1139.1405 114.431999 1138.32067 114.285308 1137.36096 Z M 111.515777 1141.22631 L 109.002693 1142.11987 C 108.563598 1142.27539 108.225547 1142.63195 108.093429 1143.07971 C 107.869033 1143.83935 107.573715 1144.55725 107.214286 1145.21582 C 106.991836 1145.62585 106.977249 1146.11645 107.177368 1146.53820 L 108.317825 1148.93542 C 107.767028 1149.59606 107.157943 1150.20617 106.495437 1150.75683 L 104.098915 1149.61840 C 103.677322 1149.41625 103.186744 1149.43188 102.776802 1149.65417 C 102.117202 1150.01281 101.399322 1150.30822 100.639663 1150.53247 C 100.192810 1150.66455 99.8362960 1151.00268 99.6798934 1151.44189 L 98.7861785 1153.95581 C 97.8730392 1154.04809 97.1269683 1154.04809 96.2138366 1153.95581 L 95.3201141 1151.44189 C 95.1637191 1151.00366 94.8072052 1150.66455 94.3603439 1150.53247 C 93.6006927 1150.30822 92.8818435 1150.01281 92.2232055 1149.65417 C 91.8132705 1149.43103 91.3217163 1149.41625 90.9010925 1149.61840 L 88.5045776 1150.75793 C 87.8430328 1150.20617 87.2339477 1149.59704 86.6821823 1148.93542 L 87.8226394 1146.5382 C 88.0227584 1146.11645 88.008171 1145.62585 87.7857208 1145.21582 C 87.4272537 1144.55920 87.1319427 1143.84045 86.9065856 1143.07885 C 86.7744598 1142.63195 86.4364089 1142.27539 85.9973144 1142.11987 L 83.4842300 1141.22631 C 83.4366378 1140.76965 83.4142913 1140.34814 83.4142913 1139.93994 C 83.4142913 1139.5321 83.4366378 1139.11145 83.48423 1138.65490 L 85.9982986 1137.76025 C 86.4364089 1137.60485 86.7744598 1137.24816 86.9065856 1136.80139 C 87.1319427 1136.04187 87.4272537 1135.32287 87.7857208 1134.66333 C 88.0081710 1134.25439 88.0227584 1133.76281 87.8226394 1133.34216 L 86.6821823 1130.94470 C 87.2339477 1130.28320 87.8430328 1129.67309 88.5045776 1129.12219 L 90.9020538 1130.26184 C 91.3217163 1130.46386 91.8142318 1130.44812 92.2241744 1130.22570 C 92.8818435 1129.86743 93.6006927 1129.57202 94.3603439 1129.34765 C 94.8072052 1129.21545 95.1637191 1128.87658 95.3201141 1128.43835 L 96.2138366 1125.92419 C 97.1182403 1125.83093 97.8662338 1125.83093 98.7861785 1125.92419 L 99.6798934 1128.43835 C 99.8362960 1128.87658 100.192810 1129.21545 100.639663 1129.34765 C 101.399322 1129.57202 102.118179 1129.86743 102.776802 1130.22570 C 103.186744 1130.44934 103.677322 1130.46386 104.098915 1130.26184 L 106.495437 1129.12219 C 107.156974 1129.67309 107.766059 1130.28320 108.317825 1130.94470 L 107.177368 1133.34216 C 106.977249 1133.76281 106.991836 1134.25439 107.214286 1134.66333 C 107.573715 1135.32470 107.869033 1136.04260 108.093429 1136.80041 C 108.225547 1137.24816 108.563598 1137.60485 109.002693 1137.76025 L 111.515777 1138.65393 C 111.563377 1139.11059 111.585716 1139.53210 111.585716 1139.93994 C 111.585716 1140.34814 111.563377 1140.76965 111.515777 1141.22631 Z" />
						</svg>
						<svg class="optionIconBox2" viewBox="91.056 1133.143 14 14">
							<path id="optionIconBox2" d="M 98.0559997 1133.14294 C 94.1961288 1133.14294 91.0559997 1136.28295 91.0559997 1140.14257 C 91.0559997 1144.00305 94.1961288 1147.14294 98.0559997 1147.14294 C 101.915893 1147.14294 105.055999 1144.00305 105.055999 1140.14257 C 105.055999 1136.28295 101.915893 1133.14294 98.0559997 1133.14294 Z" />
						</svg>
					</div>
				</div>
				<svg class="boxVertex" viewBox="0 -8 16 16.809">
					<path id="boxVertex" d="M 8 -8 C 8 -8 8.17773437 -3.2769775 11 0.5 C 13.8222656 4.27697753 16 4 16 4 L 16 8.80944824 L 0 8.31127929 L 0 4 C 0 4 2 4 5 0.5 C 8 -3 8 -8 8 -8 Z" />
				</svg>
			</div>
		</div>
	</div>
	<li class="chat-item" data-id="{{id}}">
		<div class="bubble">
			<div class=hashId>
					<!-- 
					아이디 표시 위치
					 -->
				<span>id</span>
			</div>
			<div class =plusBox>
				<svg class="plusBoxIcon" viewBox="10 4 8 32">
					<path id="plusBoxIcon" d="M 13.99999904632568 12.00000095367432 C 16.19999885559082 12.00000095367432 17.99999809265137 10.20000171661377 17.99999809265137 8.000000953674316 C 17.99999809265137 5.799999713897705 16.19999885559082 4 13.99999904632568 4 C 11.79999923706055 4 9.999999046325684 5.799999713897705 9.999999046325684 8.000000953674316 C 9.999999046325684 10.20000171661377 11.79999923706055 12.00000095367432 13.99999904632568 12.00000095367432 Z M 13.99999904632568 16.00000190734863 C 11.79999923706055 16.00000190734863 9.999999046325684 17.80000114440918 9.999999046325684 20.00000381469727 C 9.999999046325684 22.20000267028809 11.79999923706055 24.00000381469727 13.99999904632568 24.00000381469727 C 16.19999885559082 24.00000381469727 17.99999809265137 22.20000267028809 17.99999809265137 20.00000381469727 C 17.99999809265137 17.80000114440918 16.19999885559082 16.00000190734863 13.99999904632568 16.00000190734863 Z M 13.99999904632568 28.00000381469727 C 11.79999923706055 28.00000381469727 9.999999046325684 29.80000495910645 9.999999046325684 32.00000381469727 C 9.999999046325684 34.20000076293945 11.79999923706055 36 13.99999904632568 36 C 16.19999885559082 36 17.99999809265137 34.20000076293945 17.99999809265137 32.00000381469727 C 17.99999809265137 29.80000495910645 16.19999885559082 28.00000381469727 13.99999904632568 28.00000381469727 Z" />
				</svg>
				<svg class="favoriteIcon1" viewBox="2 3 30 27">
					<path id="favoriteIcon1" d="M 17 30 L 14.824997 28.057767 C 7.0999984 21.186378 2 16.654495 2 11.092643 C 2 6.5607643 5.6299982 2.9999997 10.249997 2.9999997 C 12.859997 2.9999997 15.364994 4.1918258 16.999996 6.0752062 C 18.634998 4.1918258 21.139997 2.9999997 23.749998 2.9999997 C 28.369993 2.9999997 31.999998 6.5607643 31.999998 11.092643 C 31.999998 16.654495 26.89999 21.18638 19.174995 28.072484 L 16.999996 30.000001 Z" />
				</svg>
				<svg class="favoriteIcon2" viewBox="2 3 30 27">
					<path id="favoriteIcon2" d="M 17 30 L 14.824997 28.057767 C 7.0999984 21.186378 2 16.654495 2 11.092643 C 2 6.5607643 5.6299982 2.9999997 10.249997 2.9999997 C 12.859997 2.9999997 15.364994 4.1918258 16.999996 6.0752062 C 18.634998 4.1918258 21.139997 2.9999997 23.749998 2.9999997 C 28.369993 2.9999997 31.999998 6.5607643 31.999998 11.092643 C 31.999998 16.654495 26.89999 21.18638 19.174995 28.072484 L 16.999996 30.000001 Z" />
				</svg>
				<svg class="favoriteIcon3" viewBox="2 3 30 27">
					<path id="favoriteIcon3" d="M 17 30 L 14.824997 28.057767 C 7.0999984 21.186378 2 16.654495 2 11.092643 C 2 6.5607643 5.6299982 2.9999997 10.249997 2.9999997 C 12.859997 2.9999997 15.364994 4.1918258 16.999996 6.0752062 C 18.634998 4.1918258 21.139997 2.9999997 23.749998 2.9999997 C 28.369993 2.9999997 31.999998 6.5607643 31.999998 11.092643 C 31.999998 16.654495 26.89999 21.18638 19.174995 28.072484 L 16.999996 30.000001 Z" />
				</svg>
				<svg class="invisibleIcon" viewBox="1 3 40 30">
					<path id="invisibleIcon" d="M 21.009094 9.3157882 C 26.02956 9.3157882 30.104137 12.852629 30.104137 17.210527 C 30.104137 18.236843 29.867666 19.200000 29.449291 20.100000 L 34.760799 24.710527 C 37.507503 22.721052 39.672122 20.147369 41.000003 17.210527 C 37.853118 10.278946 30.085947 5.3684215 20.990903 5.3684215 C 18.444292 5.3684215 16.00682 5.7631578 13.751249 6.4736838 L 17.680309 9.8842096 C 18.717144 9.5210514 19.82674 9.3157882 21.009094 9.3157882 Z M 2.8190088 5.0052638 L 6.9663476 8.6052627 L 7.8030924 9.3315782 C 4.7835378 11.36842 2.4188265 14.08421 1 17.210527 C 4.1468849 24.142105 11.914052 29.052631 21.009094 29.052631 C 23.828557 29.052631 26.52069 28.578948 28.976354 27.726316 L 29.740337 28.389472 L 35.07003 33 L 37.380176 30.994735 L 5.1291499 3 L 2.8190088 5.0052638 Z M 12.878126 13.736841 L 15.697589 16.184213 C 15.606637 16.51579 15.552068 16.863159 15.552068 17.210527 C 15.552068 19.831579 17.98954 21.947368 21.009094 21.947368 C 21.409276 21.947368 21.809457 21.900001 22.191448 21.821052 L 25.010913 24.268419 C 23.792177 24.789472 22.446109 25.105264 21.009094 25.105264 C 15.988630 25.105264 11.914052 21.568422 11.914052 17.210527 C 11.914052 15.963158 12.277852 14.794735 12.878125 13.736841 Z M 20.718051 12.505263 L 26.447931 17.478948 L 26.48431 17.226318 C 26.48431 14.605262 24.046838 12.489472 21.027284 12.489472 L 20.718051 12.505263 Z" />
				</svg>
				<svg class="shareIcon" viewBox="665.063 -170.939 27 30">
					<path id="shareIcon" d="M 687.5629882 -149.733871 C 686.4226684 -149.733871 685.4030151 -149.282058 684.6227416 -148.574523 L 673.9279785 -154.823928 C 674.0026855 -155.170913 674.0629882 -155.516998 674.0629882 -155.878448 C 674.0629882 -156.239883 674.0026855 -156.585968 673.9279785 -156.932968 L 684.5030517 -163.122726 C 685.3129272 -162.369110 686.3776245 -161.902847 687.5629882 -161.902847 C 690.0532836 -161.902847 692.0629882 -163.920608 692.0629882 -166.420913 C 692.0629882 -168.920318 690.0532836 -170.93898 687.5629882 -170.93898 C 685.0726928 -170.93898 683.0629272 -168.920318 683.0629272 -166.420913 C 683.0629272 -166.059478 683.1232910 -165.712478 683.1979980 -165.366409 L 672.6229858 -159.176635 C 671.8129882 -159.929351 670.7482910 -160.396530 669.5629882 -160.396530 C 667.0727539 -160.396530 665.0629882 -158.378753 665.0629882 -155.878448 C 665.0629882 -153.378143 667.0727539 -151.360382 669.5629882 -151.360382 C 670.7482910 -151.360382 671.8129882 -151.827545 672.6229858 -152.580245 L 683.3032836 -146.31549 C 683.2276 -145.999237 683.1826171 -145.667602 683.1826171 -145.335968 C 683.1826171 -142.911575 685.1482543 -140.938995 687.5629882 -140.938995 C 689.9776611 -140.938995 691.9432983 -142.911575 691.9432983 -145.335968 C 691.9432983 -147.761276 689.9776611 -149.733871 687.5629882 -149.733871 Z" />
				</svg>
				<div id="reportPBoxIcon">
					<svg class="reportIcon1" viewBox="12 -0.21 28 18">
						<path id="reportIcon1" d="M 22.3199997 -0.21 L 29.6800003 -0.21 C 32.1432991 0.250935703 34.01918792 1.337349176 35.88377761 3.379324436 C 38.56800842 6.245957374 39.5890007 11.782692 40 17.79000282 L 12 17.79000282 C 12.54000091 8.866735458 15.8244629 0.936089396 22.3199997 -0.21 Z" />
					</svg>
					<svg class="reportIcon2">
						<rect id="reportIcon2" rx="0" ry="0" x="0" y="0" width="40" height="6" />
					</svg>
					<svg class="reportIcon3">
						<ellipse id="reportIcon3" rx="3" ry="3" cx="3" cy="3" />
					</svg>
					<svg class="reportIcon4" viewBox="0 0 12 1">
						<path id="reportIcon4" d="M 0 0 L 12 0" />
					</svg>
				</div>
				<div id="invisibleFont">
					<span>INVISIBLE</span>
				</div>
				<div id="notinterestedFont">
					<span>not interested</span>
				</div>
				<div id="shareFont">
					<span>SHARE</span>
				</div>
				<div id="reportFont">
					<span>REPORT</span>
				</div>
			</div>
	      	<div class="meta">
		    	<div class="timePost">
			<!--           
			시간 표시 위치
			-->	
					<div class="posted-date"></div>
				</div>
			</div>
<!--
이미지 위치
-->
			<img id="postImage">
	 	    <div id="contentsssssss">
				<div id="contentsButtonPBox">
					<div id="contentsUpButtonPBox">
						<svg class="contentsUpButtonBright" viewBox="4 4 110 110">
							<path id="contentsUpButtonBright" d="M 8 0 L 46 0 C 50.4182777 0 54 3.58172178 54 8 L 54 46 C 54 50.4182777 50.4182777 54 46 54 L 8 54 C 3.58172178 54 0 50.4182777 0 46 L 0 8 C 0 3.58172178 3.58172178 0 8 0 Z" />
						</svg>
						<svg class="contentsUpButtonShadow">
							<rect id="contentsUpButtonShadow" rx="8" ry="8" x="0" y="0" width="54" height="54" />
						</svg>
						<svg class="contentsUpButtonBox">
							<rect id="contentsUpButtonBox" rx="8" ry="8" x="0" y="0" width="54" height="54" />
						</svg>
						<svg class="contentsUpButton" viewBox="2.239 9.452 28 14">
							<path id="contentsUpButton" d="M 28.3153247 23.1462574 C 28.7579002 23.5542335 29.4690742 23.5542335 29.908596 23.1462574 C 30.3481197 22.7382831 30.3501548 22.0792465 29.908596 21.6722221 L 17.0352535 9.75822067 C 16.5957336 9.35024642 15.8845596 9.35024642 15.4419851 9.75822067 L 2.56864213 21.6722221 C 2.12911915 22.0801963 2.12911915 22.739233 2.56864213 23.1462574 C 3.01019978 23.5542316 3.72238969 23.5542316 4.16191244 23.1462574 L 16.2386207 12.2802467 L 28.3143081 23.1462574 Z" />
						</svg>
					</div>
					<div id="contentsDownButtonPBox">
						<svg class="contentsDownButtonBright" viewBox="4 4 110 110">
							<path id="contentsDownButtonBright" d="M 8 0 L 46 0 C 50.4182777 0 54 3.58172178 54 8 L 54 46 C 54 50.4182777 50.4182777 54 46 54 L 8 54 C 3.58172178 54 0 50.4182777 0 46 L 0 8 C 0 3.58172178 3.58172178 0 8 0 Z" />
						</svg>
						<svg class="contentsDownButtonShadow">
							<rect id="contentsDownButtonShadow" rx="8" ry="8" x="0" y="0" width="54" height="54" />
						</svg>
						<svg class="contentsDownButtonBox">
							<rect id="contentsDownButtonBox" rx="8" ry="8" x="0" y="0" width="54" height="54" />
						</svg>
						<svg class="contentsDownButton" viewBox="2.239 9.452 28 14">
							<path id="contentsDownButton" d="M 28.3153247 9.75822067 C 28.7579002 9.35024642 29.4690742 9.35024642 29.908596 9.75822067 C 30.3481197 10.1661958 30.3501548 10.8252315 29.908596 11.2322559 L 17.0352535 23.1462593 C 16.5957336 23.5542335 15.8845596 23.5542335 15.4419851 23.1462593 L 2.56864213 11.2322568 C 2.12911915 10.8242826 2.12911915 10.165246 2.56864213 9.75822257 C 3.01019978 9.35024738 3.72238969 9.35024738 4.16191244 9.75822257 L 16.2386207 20.6242332 L 28.3143081 9.75822257 Z" />
						</svg>
					</div>
				</div>
	     		<div class="hashtag">
				<!-- 해시태그 위치 -->				
				</div>

				<div class="contentsss">
				<!--게시물 내용 위치-->
				</div>
			</div>
	        <div class="meta">
			<!-- 여긴 x <time class="posted-date"></time> -->
	        </div>
		</div>
	</li>
</div>
	<li class="chat-item tombstone" data-id="{{id}}">
		<div class="bubble" id="beforeBubble">
	      	<div class =plusBox></div>
			<p></p>
			<p></p>
			<p></p>
		</div>
	</li>
</div>
<ul id="chat-timeline">

</ul>
<script src="es6-promise.js"></script>
<script src="stats.min.js"></script>
<script src="scripts/infinite-scroll.js"></script>
<script src="scripts/messages.js"></script>
<script>
	//session에서 user데이터값을 받아오기
	var user = sessionStorage.getItem("user")
	
	var list = []
	$.ajax({
			url :"/showposts",
			type : "post",
			data : {"user" : user},
			dataType : "json",
			success : function(response){
				list = response
				console.log(user)
				console.log(list)
				console.log(list[0].id)
			}, // success end
			error : function(e){
					console.log(e);
			} // error end
	}); // ajax end		
	var INIT_TIME = new Date().getTime();
	const random1 = Math.floor(Math.random()*18);// 총 데이터 갯수, 현재 image0 ~19가 있음
	/**
	 * Constructs a random item with a given id.
	 * @param {number} id An identifier for the item.
	 * @return {Object} A randomly generated item.
	 */
	function getItem(id) {
		function pickRandom(a) {
			return a[Math.floor(Math.random() * a.length)];
		}

	/* 데이터 랜덤 전송위치 ///////////////////////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////*/
	
		return new Promise(function(resolve) {
			var item = {
			id: list[id].id,
			self: Math.random() < 0.1,
			image: list[id].imagepath,
			time: list[id].postDate,
			message: list[id].contents,
			hashtag: list[id].hashtag
			}
			if(item.image == '') {
			resolve(item);
			item.image = random1
			}
			var image = new Image();
			image.src = '/upload/'  + item.image;
			image.addEventListener('load', function() {
			item.image = image;
			resolve(item);
			});
			image.addEventListener('error', function() {
			item.image = '';
			resolve(item);
			});
		});

	}
	
	
	function ContentSource() {
		// Collect template nodes to be cloned when needed.
		this.tombstone_ = document.querySelector("#templates > .chat-item.tombstone");
		this.messageTemplate_ = document.querySelector("#templates >#mainBarBox > .chat-item:not(.tombstone)");
		this.nextItem_ = 0;
	}

	ContentSource.prototype = {
		fetch: function(count) {
			// Fetch at least 30 or count more objects for display.
			count = Math.max(30, count);
			return new Promise(function(resolve, reject) {
			// Assume 50 ms per item.
			setTimeout(function() {
				var items = [];
				for (var i = 0; i < list.length; i++) {
				items[i] = getItem(i);
				}
				resolve(Promise.all(items));
			}.bind(this), 1000 /* Simulated 1 second round trip time */ );
			}.bind(this));
		},

		createTombstone: function() {
			return this.tombstone_.cloneNode(true);
		},

		render: function(item, div) {
			// TODO: Different style?
			div = div || this.messageTemplate_.cloneNode(true);
			div.querySelector('.bubble .hashId span').textContent = item.id;
			div.querySelector('.contentsss').textContent = item.message;
			div.querySelector('.bubble .posted-date').textContent = item.time;
			var hashtags = div.querySelector('.hashtag');
			var hashtagSplit = item.hashtag.split("#");
			for(var i = 1; i < hashtagSplit.length; i++){
				hashtags.innerHTML += "<a href='https://search.shopping.naver.com/search/all?query="
					+hashtagSplit[i]+"&cat_id=&frm=NVSHATC'>#"+hashtagSplit[i]+"</a>";
			}
			
			
			//image 설정
			var img = div.querySelector('.bubble img');
			if(item.image !== '') {
			img.classList.remove('invisible');
			img.src = item.image.src;
			img.width = item.image.width;
			img.height = item.image.height;
			} else {
			img.src = '';
			img.classList.add('invisible');
			}
		
			if(item.self) {
			div.classList.add('from-me');
			} else {
			div.classList.remove('from-me');
			}
			return div;
		},

	};

	function numDomNodes(node) {
		if(!node.children || node.children.length == 0)
			return 0;
		var childrenCount = Array.from(node.children).map(numDomNodes);
		return node.children.length + childrenCount.reduce(function(p, c){ return p + c; }, 0);
		}

		document.addEventListener('DOMContentLoaded', function() {
		window.scroller =
			new InfiniteScroller(
			document.querySelector('#chat-timeline'),
			new ContentSource()
			);

	// var stats = new Stats();
	//   var domPanel = new Stats.Panel('DOM Nodes', '#0ff', '#002');
	//   stats.addPanel(domPanel);
	//   stats.showPanel(3);
	//   document.body.appendChild(stats.dom);
	//   var TIMEOUT = 100;
	//   setTimeout(function timeoutFunc() {
	//     // Only update DOM node graph when we have time to spare to call
	//     // numDomNodes(), which is a fairly expensive function.
	//     requestIdleCallback(function() {
	//       domPanel.update(numDomNodes(document.body), 1500);
	//       setTimeout(timeoutFunc, TIMEOUT);
	//     });
	//   }, TIMEOUT);
		});
		</script>
	</body>
</html>